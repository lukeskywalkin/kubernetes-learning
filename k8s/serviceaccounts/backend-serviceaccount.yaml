apiVersion: v1
kind: ServiceAccount
metadata:
  name: backend-service-account
  namespace: default
  annotations:
    # In AWS EKS, this would be the IAM role ARN for IRSA
    # eks.amazonaws.com/role-arn: arn:aws:iam::ACCOUNT_ID:role/backend-role
    description: "Service account for backend service (IRSA pattern)"
    
# This is used to automatically mount the service account token to the pod.
# Question: does this mount the token to all pods in the namespace?
# Answer: No, this only affects pods that use this specific service account ("backend-service-account")â€”not all pods in the namespace.
# Question: what if the below was set to false? How would the token need to be retrieved by the pod then?
# Answer: Then the pod would not automatically mount the service account token. The pod would need to retrieve the token manually using the following command:
# kubectl get secret $(kubectl get serviceaccount backend-service-account -o jsonpath='{.secrets[0].name}') -o jsonpath='{.data.token}' | base64 --decode
automountServiceAccountToken: true
